<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    .container {
      width: 800px;
      height: 500px;
      margin: 20px auto 0;
      background-color: pink;
      display: flex;
      justify-content: center;
      align-items: center;

      position: relative;
    }

    .prev,
    .next {
      width: 40%;
      height: 100%;
      background-color: skyblue;
      cursor: pointer;

      opacity: 0;
      position: absolute;
      z-index: 999;
    }

    .prev {
      left: 0;
    }

    .next {
      right: 0;
    }

    .img {
      width: 60%;
      height: 60%;
      transition: all 0.3s;

      opacity: 0;
      position: absolute;
      z-index: 0;
    }

    /* 左偏移 */
    .left {
      opacity: 1;
      transform: translateX(-30%);
    }

    /* 中间主要显示区域 */
    .show {
      opacity: 1;
      transform: scale(1.3);
      z-index: 99;
    }

    /* 右偏移 */
    .right {
      opacity: 1;
      transform: translateX(30%);
    }

    ul {
      width: 800px;
      margin: 0px auto;
      display: flex;
      justify-content: space-between;
      background-color: pink;
      box-sizing: border-box;
      padding: 0 200px 40px;
    }
    ul li {
      list-style: none;
      width: 20px;
      height: 20px;
      background-color: skyblue;
      border-radius: 50%;
      cursor: pointer;
    }

    ul li:hover {
      background-color: rgb(89, 199, 87);
    }

    .active {
      background-color: crimson;
    }
  </style>
  <body>
    <div class="container">
      <button class="prev"></button>
      <button class="next"></button>
      <img class="img" src="./imgs/1.jpg" alt="" />
      <img class="img" src="./imgs/2.jpg" alt="" />
      <img class="img" src="./imgs/3.jpg" alt="" />
      <img class="img" src="./imgs/4.jpg" alt="" />
      <img class="img" src="./imgs/5.jpg" alt="" />
      <img class="img" src="./imgs/6.jpg" alt="" />
      <img class="img" src="./imgs/7.jpg" alt="" />
      <img class="img" src="./imgs/8.jpg" alt="" />
      <img class="img" src="./imgs/9.jpg" alt="" />
      <img class="img" src="./imgs/10.jpg" alt="" />
      <img class="img" src="./imgs/11.jpg" alt="" />
    </div>
    <ul>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </body>

  <script>
    const imgs = document.querySelectorAll('.img')
    const list = document.querySelectorAll('li')
    const Swiper = (imgs, interval = 300) => {
      let start = 0 // 记录上一次切换的时间
      const len = imgs.length - 1
      const index = new Proxy(
        { value: null },
        {
          set(t, k, v, r) {
            // 节流处理
            if (Date.now() - start < interval) return false
            start = Date.now() // 记录当前时间
            // 处理索引越界
            if (v < 0) v = len
            if (v > len) v = 0
            const main = {
              left: imgs[v - 1] || imgs[len], // 获取左偏移元素
              show: imgs[v], // 获取 show 元素
              right: imgs[v + 1] || imgs[0] // 获取右偏移元素
            }

            document.querySelector('.active')?.classList.remove('active')
            list[v]?.classList.add('active')

            // 删除旧索引所对应的 左偏移 show 右偏移
            // 新索引添加所对应的 左偏移 show 右偏移
            Object.keys(main).forEach(item => {
              document.querySelector(`.${item}`)?.classList.remove(item)
              main[item]?.classList.add(item)
            })
            return Reflect.set(t, k, v, r)
          }
        }
      )
      index.value = 0 // 初始化
      return { next: () => index.value++, prev: () => index.value--, change: num => (index.value = num) }
    }

    const swiper = Swiper(imgs)
    document.querySelector('.prev').onclick = swiper.prev
    document.querySelector('.next').onclick = swiper.next

    list.forEach((item, k) => {
      item.onclick = swiper.change.bind(null, k)
    })
  </script>
</html>
